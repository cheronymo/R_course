<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Bonnes pratiques, Git, Markdown et Quarto avec R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="R_and_Git_files/libs/clipboard/clipboard.min.js"></script>
<script src="R_and_Git_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="R_and_Git_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="R_and_Git_files/libs/quarto-html/popper.min.js"></script>
<script src="R_and_Git_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R_and_Git_files/libs/quarto-html/anchor.min.js"></script>
<link href="R_and_Git_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R_and_Git_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R_and_Git_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R_and_Git_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R_and_Git_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="R_and_Git_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="R_and_Git_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="R_and_Git_files/libs/plotly-binding-4.11.0/plotly.js"></script>

<script src="R_and_Git_files/libs/typedarray-0.1/typedarray.min.js"></script>

<script src="R_and_Git_files/libs/jquery-3.5.1/jquery.min.js"></script>

<link href="R_and_Git_files/libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">

<script src="R_and_Git_files/libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>

<link href="R_and_Git_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="R_and_Git_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#travailler-sous-un-projet-r" id="toc-travailler-sous-un-projet-r" class="nav-link" data-scroll-target="#travailler-sous-un-projet-r">Travailler sous un projet R</a>
  <ul class="collapse">
  <li><a href="#cest-quoi-un-projet-r" id="toc-cest-quoi-un-projet-r" class="nav-link" data-scroll-target="#cest-quoi-un-projet-r">C’est quoi un projet R</a></li>
  <li><a href="#création-dun-projet-r-studio" id="toc-création-dun-projet-r-studio" class="nav-link" data-scroll-target="#création-dun-projet-r-studio">Création d’un projet R studio</a></li>
  <li><a href="#travailler-dans-un-projet-r-studio" id="toc-travailler-dans-un-projet-r-studio" class="nav-link" data-scroll-target="#travailler-dans-un-projet-r-studio">Travailler dans un projet R studio</a>
  <ul class="collapse">
  <li><a href="#chemins-relatifs" id="toc-chemins-relatifs" class="nav-link" data-scroll-target="#chemins-relatifs">Chemins relatifs</a></li>
  </ul></li>
  <li><a href="#documentation-des-scripts" id="toc-documentation-des-scripts" class="nav-link" data-scroll-target="#documentation-des-scripts">Documentation des scripts</a></li>
  <li><a href="#fonction-source" id="toc-fonction-source" class="nav-link" data-scroll-target="#fonction-source">Fonction {source}</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  <li><a href="#git" id="toc-git" class="nav-link" data-scroll-target="#git">{git}</a>
  <ul class="collapse">
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#configuration" id="toc-configuration" class="nav-link" data-scroll-target="#configuration">Configuration</a></li>
  <li><a href="#initialisation-dun-projet-git" id="toc-initialisation-dun-projet-git" class="nav-link" data-scroll-target="#initialisation-dun-projet-git">Initialisation d’un projet git</a>
  <ul class="collapse">
  <li><a href="#créer-un-projet" id="toc-créer-un-projet" class="nav-link" data-scroll-target="#créer-un-projet">Créer un projet</a></li>
  </ul></li>
  <li><a href="#configurer-git-sur-rstudio" id="toc-configurer-git-sur-rstudio" class="nav-link" data-scroll-target="#configurer-git-sur-rstudio">Configurer git sur RStudio</a>
  <ul class="collapse">
  <li><a href="#access-tokens" id="toc-access-tokens" class="nav-link" data-scroll-target="#access-tokens">Access Tokens</a></li>
  </ul></li>
  <li><a href="#retour-à-notre-projet" id="toc-retour-à-notre-projet" class="nav-link" data-scroll-target="#retour-à-notre-projet">Retour à notre projet</a>
  <ul class="collapse">
  <li><a href="#création-dun-nouveau-projet-sous-r" id="toc-création-dun-nouveau-projet-sous-r" class="nav-link" data-scroll-target="#création-dun-nouveau-projet-sous-r">Création d’un nouveau projet sous R</a></li>
  </ul></li>
  <li><a href="#onglet-git-sur-rstudio" id="toc-onglet-git-sur-rstudio" class="nav-link" data-scroll-target="#onglet-git-sur-rstudio">Onglet Git sur RStudio</a>
  <ul class="collapse">
  <li><a href="#commit" id="toc-commit" class="nav-link" data-scroll-target="#commit">Commit</a></li>
  <li><a href="#push-pull" id="toc-push-pull" class="nav-link" data-scroll-target="#push-pull">Push / Pull</a></li>
  <li><a href="#explorer-lhistorique" id="toc-explorer-lhistorique" class="nav-link" data-scroll-target="#explorer-lhistorique">Explorer l’historique</a></li>
  <li><a href="#gitignore" id="toc-gitignore" class="nav-link" data-scroll-target="#gitignore">.gitignore</a></li>
  <li><a href="#les-branches" id="toc-les-branches" class="nav-link" data-scroll-target="#les-branches">Les branches</a></li>
  </ul></li>
  <li><a href="#associer-un-projet-existant-à-git" id="toc-associer-un-projet-existant-à-git" class="nav-link" data-scroll-target="#associer-un-projet-existant-à-git">Associer un projet existant à Git</a></li>
  </ul></li>
  <li><a href="#quarto-et-markdown" id="toc-quarto-et-markdown" class="nav-link" data-scroll-target="#quarto-et-markdown">Quarto et Markdown</a>
  <ul class="collapse">
  <li><a href="#markdown" id="toc-markdown" class="nav-link" data-scroll-target="#markdown">Markdown</a>
  <ul class="collapse">
  <li><a href="#création" id="toc-création" class="nav-link" data-scroll-target="#création">Création</a></li>
  <li><a href="#generer-la-sortie" id="toc-generer-la-sortie" class="nav-link" data-scroll-target="#generer-la-sortie">Generer la sortie</a></li>
  <li><a href="#organisation" id="toc-organisation" class="nav-link" data-scroll-target="#organisation">Organisation</a></li>
  </ul></li>
  <li><a href="#quarto" id="toc-quarto" class="nav-link" data-scroll-target="#quarto">Quarto</a>
  <ul class="collapse">
  <li><a href="#les-différences-de-syntaxe" id="toc-les-différences-de-syntaxe" class="nav-link" data-scroll-target="#les-différences-de-syntaxe">Les différences de syntaxe</a></li>
  <li><a href="#les-nouveautés" id="toc-les-nouveautés" class="nav-link" data-scroll-target="#les-nouveautés">Les nouveautés</a></li>
  </ul></li>
  <li><a href="#quarto-presentation" id="toc-quarto-presentation" class="nav-link" data-scroll-target="#quarto-presentation">Quarto presentation</a></li>
  <li><a href="#presentation" id="toc-presentation" class="nav-link" data-scroll-target="#presentation">Presentation</a></li>
  <li><a href="#mise-en-page" id="toc-mise-en-page" class="nav-link" data-scroll-target="#mise-en-page">Mise en page</a>
  <ul class="collapse">
  <li><a href="#haut-de-page" id="toc-haut-de-page" class="nav-link" data-scroll-target="#haut-de-page">Haut de page</a></li>
  <li><a href="#slide" id="toc-slide" class="nav-link" data-scroll-target="#slide">Slide</a></li>
  <li><a href="#option-tableau-et-ecrir-sur-diapo" id="toc-option-tableau-et-ecrir-sur-diapo" class="nav-link" data-scroll-target="#option-tableau-et-ecrir-sur-diapo">Option tableau et ecrir sur diapo</a></li>
  <li><a href="#confetti" id="toc-confetti" class="nav-link" data-scroll-target="#confetti">Confetti</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#tips" id="toc-tips" class="nav-link" data-scroll-target="#tips">Tips</a>
  <ul class="collapse">
  <li><a href="#rdata-et-.rds" id="toc-rdata-et-.rds" class="nav-link" data-scroll-target="#rdata-et-.rds">.Rdata et .rds</a></li>
  <li><a href="#browser" id="toc-browser" class="nav-link" data-scroll-target="#browser">{browser}</a></li>
  <li><a href="#raccourci-clavier" id="toc-raccourci-clavier" class="nav-link" data-scroll-target="#raccourci-clavier">Raccourci clavier</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bonnes pratiques, Git, Markdown et Quarto avec R</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Ce document a pour but de rassembler l’ensemble des choses qui font les bonnes pratiques sous R. Ce n’est pas exhaustif et ne regroupe que des choses auxquelles j’ai pensé pour le moment. Il doit être vivant donc n’hésitez pas si vous voulez ajouter des choses.</p>
</section>
<section id="travailler-sous-un-projet-r" class="level1">
<h1>Travailler sous un projet R</h1>
<section id="cest-quoi-un-projet-r" class="level2">
<h2 class="anchored" data-anchor-id="cest-quoi-un-projet-r">C’est quoi un projet R</h2>
<p>Les projets RStudio sont des outils qui contribuent à assurer la reproductibilité d’un traitement statistique. Ils facilitent la collaboration entre plusieurs développeurs, mais aussi l’organisation du travail lorsqu’on travaille seul.</p>
<p>Le principe d’un projet RStudio est de rassembler tous les éléments de contexte propres à ce projet : espace de travail, historique de commandes, variables d’environnement, options de R, etc. Utiliser un projet RStudio présente donc de multiples avantages :</p>
<ul>
<li><p>Il centralise l’ensemble des éléments d’un projet : codes, réglages, documentation, et sorties (articles, présentations)</p></li>
<li><p>Il facilite la compréhension du traitement pour les utilisateurs extérieurs et rend plus aisées les évolutions postérieures du projet</p></li>
<li><p>Il organise l’interaction entre les fichiers (plusieurs codes, rédaction de documents avec R markdown…) et avec les données</p></li>
<li><p>Il renforce la portabilité : le répertoire de travail par défaut d’un projet est le dossier où se situe le fichier .Rproj. Cela rend les scripts indépendants de l’arborescence de la machine. Ainsi, si vous avez un code traitement.R situé dans le même dossier que le fichier .Rproj, alors le chemin de ce code est ./traitement.R, où que soit situé le dossier du projet.</p></li>
</ul>
</section>
<section id="création-dun-projet-r-studio" class="level2">
<h2 class="anchored" data-anchor-id="création-dun-projet-r-studio">Création d’un projet R studio</h2>
<p>À l’ouverture de R, la session est hors projet. On peut le voir en haut à droite de la page.</p>
<p><img src="./pictures/R_project1.png" class="img-fluid"></p>
<p>Pour créer un projet, il suffit de cliquer sur le bouton à gauche et de suivre les étapes.</p>
<p><img src="./pictures/R_project2.png" class="img-fluid"></p>
<p>Créer un nouveau répertoire.</p>
<p><img src="./pictures/R_project3.png" class="img-fluid"></p>
<p>Créer un nouveau projet.</p>
<p><img src="./pictures/R_project4.png" class="img-fluid"></p>
<p>Nommer le projet.</p>
<p><img src="./pictures/R_project5.png" class="img-fluid"></p>
<p>Et on se retrouve dans le projet qu’on vient de créer.</p>
<p><img src="./pictures/R_project6.png" class="img-fluid"></p>
</section>
<section id="travailler-dans-un-projet-r-studio" class="level2">
<h2 class="anchored" data-anchor-id="travailler-dans-un-projet-r-studio">Travailler dans un projet R studio</h2>
<p>Maintenant qu’on se trouve dans un projet R, on peut voir dans la fenêtre “File” en bas à droite qu’il n’y a que le projet dans notre fichier. Si on se déplace dans le répertoire de notre ordinateur, il suffit de cliquer sur le projet pour retourner à la racine du projet.&nbsp; On peut aussi se déplacer dans les autres fichiers à partir de cette fenêtre et revenir à la racine du projet en cliquant sur l’icône bleue à droite.</p>
<p><img src="./pictures/R_project7.png" class="img-fluid"></p>
<p>On peut créer dans ce projet une arborescence de fichiers pour organiser son travail. Il suffit de le créer en appuyant sur folder. Moi personnellement je crée toujours 3 fichiers par default:</p>
<ul>
<li><p>DATA : il contient toutes les données</p></li>
<li><p>SCRIPT : il contient tous les scripts (manipulation de données, analyses, visualisation, etc.)</p></li>
<li><p>EXPORT : il contient toutes les sorties (données nettoyées, plots, .Rdata)</p></li>
</ul>
<p><img src="./pictures/R_project8.png" class="img-fluid"></p>
<p>Il peut y avoir ensuite des sous-dossiers à votre convenance.</p>
<p>Pour travailler dans un projet R, il suffit maintenant d’utiliser des <strong>chemins relatifs</strong>.</p>
<section id="chemins-relatifs" class="level3">
<h3 class="anchored" data-anchor-id="chemins-relatifs">Chemins relatifs</h3>
<p>Un chemin relatif donne la localisation de votre fichier dans l’arborescence, à partir de la racine de votre projet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">read.csv2</span>(<span class="st">"./DATA/bd.csv"</span>) <span class="co"># pour acceder au données</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggsave</span>(<span class="st">"./EXPORT/plot/monplot.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="documentation-des-scripts" class="level2">
<h2 class="anchored" data-anchor-id="documentation-des-scripts">Documentation des scripts</h2>
<p>La documentation d’un script est très importante, surtout dans l’optique de produire un travail reproducible et transmissible.</p>
<p>Je préconise à minima :</p>
<ul>
<li><p>un titre explicite</p></li>
<li><p>le nom de l’auteur</p></li>
<li><p>Date de la dernière mise à jour</p></li>
<li><p>La <strong>version de R</strong> (pour les problèmes de dépendances)</p></li>
</ul>
<p><img src="./pictures/ScriptR1.png" class="img-fluid"></p>
<p>Ensuite dans le corps du script, il est possible de mettre en place des titres pour se retrouver dans les différentes étapes, en utilisant la mise en page suivante :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Titre niveau 1 -------------------------------------</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ou</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Titre niveau1 =====================================</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Titre niveau 2 =====================================</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="do">### Titre niveau 3 =====================================</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On peut ensuite retrouver les chapitres en bas et à droite pour se deplacer dedans.</p>
<p><img src="./pictures/ScriptR2.png" class="img-fluid"></p>
<p>Ne pas oublier de mettre le plus d’informations possible sur le pourquoi de chaque étape, et des informations pour le soit du future ou un autre utilisateur du script (exemple: où sont les données)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importation des données ================</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> data <span class="ot">=</span> dplyr<span class="sc">::</span>starwars <span class="co"># le jeu de données est dipsonible dans le dossier "./SCRIPT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fonction-source" class="level2">
<h2 class="anchored" data-anchor-id="fonction-source">Fonction {source}</h2>
<p>Pour éviter d’avoir des scripts trop long, il est possible de séparer les actions dans différents script et de les appeler dans un seul script final. Pour cela on peut utiliser la fonction {source()}.</p>
<p>Par exemple, on peut créer une script de nettoyage des données:</p>
<ul>
<li>./SCRIPTS/01_clean_data.R</li>
</ul>
<p>Puis un second script qui analyses les données issue de ce script:</p>
<ul>
<li>./SCRIPTS/02_Analyses.R</li>
</ul>
<p>Ce second script peut faire tourner tous le premier script en utilisant la fonction {source}, en début de code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"./SCRIPTS/01_clean_data.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Cela permet d’avoir un code plus court, plus simple à comprendre et à debugger.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Le projet R permet de travailler de manière organiser et propre.</p>
</section>
</section>
<section id="git" class="level1">
<h1>{git}</h1>
<p>git est un logicielle que l’on doit installer sur son ordinateur qui va nous permettre de suivre les modifications que l’on fait sur un projet (seul ou à plusieurs). Cela s’appelle le <strong>Version control</strong>. Il se manipule normalement par des lignes de commande, mais Rstudio permet (quasiment) de s’en passer en utilisant l’interface graphique.</p>
<p>git est utilisé pour faire des “snapshots” de l’état du projet à chaque sauvegarde (‘commit’)</p>
<p>git permet de travailler sur une seul et même script et de suivre ses modifications, plutôt que de faire des versions différente non traceable (V1, V2, V3, V3_def, V3_def_final, V3_def_final_test_error, etc.)</p>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>Il est necessaire d’installer git sur la machine avant tout. On peut le telecharger et l’installer depuis <a href="https://git-scm.com/install/" class="uri">https://git-scm.com/install/</a>.</p>
<ul>
<li><p>Installer</p></li>
<li><p>Choisir “Use git from the Windows Command Prompt”</p></li>
<li><p>Choisir “Checkout as it, commit as-is”</p></li>
</ul>
</section>
<section id="configuration" class="level2">
<h2 class="anchored" data-anchor-id="configuration">Configuration</h2>
<p>Il faut expliquer à RStudio qu’on a installé git et lui donner le chemin d’accès. Dans Global Option:</p>
<p><img src="./pictures/git1.png" class="img-fluid"> Vérifier le chemin vers l’exécutable git:</p>
<p><img src="./pictures/git2.png" class="img-fluid"></p>
</section>
<section id="initialisation-dun-projet-git" class="level2">
<h2 class="anchored" data-anchor-id="initialisation-dun-projet-git">Initialisation d’un projet git</h2>
<p>Le versionnement de git fonctionne avec une instance en ligne, il existe notamment Gitlab et Github. L’université de La Rochelle met à disposition un <a href="https://gitlab.univ-lr.fr/">GitLab</a> que je vous propose d’utiliser.</p>
<p>Il vous suffit de vous connecter.</p>
<section id="créer-un-projet" class="level3">
<h3 class="anchored" data-anchor-id="créer-un-projet">Créer un projet</h3>
<p>Utiliser le bouton “New Project”:</p>
<p><img src="./pictures/gitlab1.png" class="img-fluid"></p>
<p>Le nom du projet doit respecter plusieurs règles :</p>
<ul>
<li><p>en minuscule</p></li>
<li><p>sans espace ou underscore</p></li>
<li><p>pas de chiffre</p></li>
</ul>
<p>Il ne faut pas cocher “Initialiser un README”.</p>
<p><img src="./pictures/gitlab2.png" class="img-fluid"></p>
<p>Vous devez choisir un “Namespace”, pour commencer on va choisir le nom d’utilisateur. Mais on peut le placer dans un projet ou un dossier.</p>
</section>
</section>
<section id="configurer-git-sur-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="configurer-git-sur-rstudio">Configurer git sur RStudio</h2>
<p>Le package {usethise} permet de se passer des lignes de commande pour la configuration de git sur R. Ces instructions sont à faire une seule fois et ne sont pas necessaire à la création de chaque projet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_config</span>(<span class="at">scope =</span> <span class="st">"user"</span>,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">user.name =</span> <span class="st">"nom prenom"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">user.email =</span> <span class="st">"votre@email.fr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="access-tokens" class="level3">
<h3 class="anchored" data-anchor-id="access-tokens">Access Tokens</h3>
<p>Pour plus de sécurité, la connection entre Gitlab et Rstudio se fait par l’intermediaire d’un token.</p>
<p>Le token est généré depuis gitlab, dans “Preferences”,</p>
<p><img src="./pictures/gitlab3.png" class="img-fluid"> Puis dans ‘Access Token’, il suffit de générer un “New Token”:</p>
<p><img src="./pictures/gitlab4.png" class="img-fluid"></p>
<p>Il faut ajouter un nom, une date d’expiration et cocher tous les “scopes”.</p>
<p>Ensuite, copier le token et stockez le !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>(<span class="at">url =</span> <span class="st">"https://gitlab.univ-lr.fr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Il faut copier le token de GitLab.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_config</span>(<span class="at">scope =</span> <span class="st">"user"</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">init.defaultBranch =</span> <span class="st">"main"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="retour-à-notre-projet" class="level2">
<h2 class="anchored" data-anchor-id="retour-à-notre-projet">Retour à notre projet</h2>
<p>On peut maintenant recuperer le lien “https” en cliquant sur le bouton “clone”:</p>
<p><img src="./pictures/gitlab5.png" class="img-fluid"></p>
<section id="création-dun-nouveau-projet-sous-r" class="level3">
<h3 class="anchored" data-anchor-id="création-dun-nouveau-projet-sous-r">Création d’un nouveau projet sous R</h3>
<p>On peut créer un nouveau projet sur R et cette fois, en selectionnant “Version Control”, puis “GIT”:</p>
<p><img src="./pictures/gitR1.png" class="img-fluid"></p>
<p>Il faut ensuite renseigner l’URL du projet créé sur Gitlab:</p>
<p><img src="./pictures/gitR2.png" class="img-fluid"></p>
<p>Vous venez de créer un projet relier à Gitlab.</p>
</section>
</section>
<section id="onglet-git-sur-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="onglet-git-sur-rstudio">Onglet Git sur RStudio</h2>
<p>Le projet git permet d’activer un nouvel onglet dans la gestion d’un projet R. L’onglet git permet de suivre les changements qui vont s’afficher dans l’interface.</p>
<p><img src="./pictures/gitR3.png" class="img-fluid"></p>
<p>Pour sauvergarder ces modification, il faut declencher un commit. Un commit est une photo de l’état du projet à un moment donné. Pour le déclencher, il suffit de cliquer sur le bouton. Il fait apparaitre une fenêtre. Dans cette fenetre, on voit à gauche les modifications. Chaque modification peut être associé à un commit, qui prend la forme d’un message. Il suffit de <strong>selectionner</strong> les modifications à gauche et de les décrire à droite, avant de cliquer sur “Commit”. En cliquant sur commit on prend un photo de l’état du projet.</p>
<p><img src="./pictures/gitR4.png" class="img-fluid"></p>
<p>La descrition des <strong>commits</strong> est importante car ils permettent de suivre les modifications du projet. Il faut être le plus precis possible sur ce qu’amène les modifications au projets :</p>
<ul>
<li><p>ajout de données</p></li>
<li><p>modification d’un script en particulier</p></li>
<li><p>resolution d’une erreur precise</p></li>
<li><p>etc.</p></li>
</ul>
<p>Cependant, une fois le commit fabriqué, l’information est stocké en <strong>local</strong>.</p>
<p>Il faut appuyé sur <strong>push</strong> pour l’envoyer sur le <strong>repository</strong> en ligne.</p>
<p><img src="./pictures/gitR5.png" class="img-fluid"></p>
<p><img src="./pictures/gitR6.png" class="img-fluid"></p>
<p>Vous pouvez dès à présent voir vos modifications en ligne.</p>
<section id="commit" class="level3">
<h3 class="anchored" data-anchor-id="commit">Commit</h3>
<p>Le panneau git de RStudio indique en temps réel l’état du projet. Le statut des different fichiers est affiché par un code couleur :</p>
<ul>
<li><p>jaune: nouveau fichier</p></li>
<li><p>vert: en cour de commit</p></li>
<li><p>bleu: modifié</p></li>
<li><p>rouge: supprimé</p></li>
</ul>
</section>
<section id="push-pull" class="level3">
<h3 class="anchored" data-anchor-id="push-pull">Push / Pull</h3>
<ul>
<li><p>Push : Une fois que les commit sont effectués, il faut effectuer un push pour envoyer sur le repository en ligne (Gitlab)</p></li>
<li><p>Pull : permet de rapatrier les modifications faites par d’autres utilisateur ou vous même, presentes sur le repository en ligne. Le projet RStudio en local est alors modifié en consequence.</p></li>
</ul>
</section>
<section id="explorer-lhistorique" class="level3">
<h3 class="anchored" data-anchor-id="explorer-lhistorique">Explorer l’historique</h3>
<p>Il est possible de visualiser l’historique de commit depuis le gitlab.</p>
</section>
<section id="gitignore" class="level3">
<h3 class="anchored" data-anchor-id="gitignore">.gitignore</h3>
<p>Un fichier .gitignore permet de dire à git de ne pas surveille les changement de tel ou tel fichier (dossier) et de ne pas l’envoyer sur le repository. Le fichier “.gitignore” doit se trouver à la racine du projet.</p>
<p><img src="./pictures/gitignore.png" class="img-fluid"></p>
<p>On peut ajouter un fichier à la liste en utilisant :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_ignore</span>(<span class="st">"fichier.html"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="les-branches" class="level3">
<h3 class="anchored" data-anchor-id="les-branches">Les branches</h3>
<p>Il est possible de travailler sur une branch differente de la branche principale appelé “main”. C’est utile pour faire de l’experimentation sans vouloir tout casser ou pour travailler à plusieurs. Il existe plusieurs façon de créer une branche. Ici je présente la façon qui celon moi est la plus facile pour suivre les modification, en passant par des ‘Issues’ et des “Merge request”.</p>
<p><img src="./pictures/git_branch_merge.png" class="img-fluid"></p>
<section id="issues" class="level4">
<h4 class="anchored" data-anchor-id="issues">Issues</h4>
<p>Les “Issues” sont crées depuis le Gitlab, dans le projet. Il suffit de cliquer sur “Issues” et “New issue”.</p>
<p><img src="./pictures/issues1.png" class="img-fluid"></p>
<p>Une “Issue” doit être documenté:</p>
<ul>
<li><p>un nom</p></li>
<li><p>une description</p></li>
</ul>
<p><img src="./pictures/issues2.png" class="img-fluid"></p>
<p>Une fois que l’issue est créée, il faut mettre en place une “Merge request” qui permet de créer une nouvelle branche pour travailler dessus.</p>
<p><img src="./pictures/issues3.png" class="img-fluid"></p>
</section>
<section id="merge-request" class="level4">
<h4 class="anchored" data-anchor-id="merge-request">Merge request</h4>
<p>La mercge request met en place une nouvelle branche de travaille. Il faut lui donner:</p>
<ul>
<li><p>la branche d’origine</p></li>
<li><p>le nom de la nouvelle branche</p></li>
</ul>
<p><img src="./pictures/merge1.png" class="img-fluid"></p>
<p>La merge request doit être assigné à un utilisateur et elle peut être lancée.</p>
<p><img src="./pictures/merge2.png" class="img-fluid"></p>
<p>La nouvelle branche existe !</p>
<p><img src="./pictures/merge3.png" class="img-fluid"></p>
</section>
<section id="pull-branch" class="level4">
<h4 class="anchored" data-anchor-id="pull-branch">Pull branch</h4>
<p>Maintenant, on peut retourner sur R et travailler sur notre nouvelle branche. Il faut donc “Pull” les mises à jours. on peut voir que la nouvelle branche est importée.</p>
<p><img src="./pictures/merge4.png" class="img-fluid"></p>
<p>Il faut ensuite choisir cette branche dans le menu deroulant.</p>
<p><img src="./pictures/merge5.png" class="img-fluid"></p>
<p>On peut à partir de maintenant travailler sur la branche, faire des modifications et surtout continuer de documenter notre travail en faisant des commit et des push. On travaille de la même façon mais sur une branche différente.</p>
</section>
<section id="merge-les-branches" class="level4">
<h4 class="anchored" data-anchor-id="merge-les-branches">Merge les branches</h4>
<p>Quand on a finit de travailler et de tester notre code, et qu’on est sur de notre travail, on peut ramener les modifications faite sur notre branche secondaire dans la “main”. Il faut pour cela retourner sur le Gitlab dans notre merge request.</p>
<p>On peut voir que des modifications ont été apporté.</p>
<p>Il faut cliquer sur merge et “Review”.</p>
<p><img src="./pictures/merge6.png" class="img-fluid"></p>
<p>On peut la definir “as ready”. Et cliquer sur “Merge”</p>
<p><img src="./pictures/merge7.png" class="img-fluid"></p>
<p>A partir de là, notre branche secondaire est fusionné avec notre branche principale.</p>
<p>On peut retourner sur R pour “Pull” nos modifications et retourner travailler sur la branche principale.</p>
<p><img src="./pictures/merge8.png" class="img-fluid"></p>
<p>Le système de branche permet de travailler sur des nouvelles versions de notre code sans risque de tout casser. Si la nouvelle branche ne marche pas, il suffit de l’abandonner et de retourner sur la branche principale. C’est aussi très pratique quand on travaille à plusieurs sur un même projet en même temps.</p>
</section>
</section>
</section>
<section id="associer-un-projet-existant-à-git" class="level2">
<h2 class="anchored" data-anchor-id="associer-un-projet-existant-à-git">Associer un projet existant à Git</h2>
<p>On vient de montrer comment créer un nouveau projet directement à partir de Gitlab. Mais on peut aussi vouloir versionner un projet à posteriori. Pour cela il faut creer un projet avec le même nom que son projet R dans Gitlab, puis dans RSturio, on peut utiliser le package {usethis}:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git</span>()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># dire oui à tout</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git_remote</span>(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"origin"</span>, </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">"https://gitlab.univ-lr.fr/gchero/projettest.git"</span>, </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>gert<span class="sc">:</span><span class="fu">git_push</span>(<span class="at">remote =</span> <span class="st">"origin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="quarto-et-markdown" class="level1">
<h1>Quarto et Markdown</h1>
<p>Les outils Quarto et Rmarkdwon permettent de produire des documents pourvant melanger du code, du texte, des figures, des sorties de modèles et des analyses. Les rapports dynamiques générés à partir d’un fichier Quarto ou Markdown s’intègrent dans le concept de Recherche reproductible , puisque l’analyse statistique réalisée peut être reproduite, strictement à l’identique, par quiconque dispose du fichier.Rmd. Les documents peuvent être générés sous divers formats : html, pdf ou docx.</p>
<section id="markdown" class="level2">
<h2 class="anchored" data-anchor-id="markdown">Markdown</h2>
<section id="création" class="level3">
<h3 class="anchored" data-anchor-id="création">Création</h3>
<p>Le mieux est de créer le fichier au sein d’un projet R, en cliquant sur “New File&gt; R Markdown”.</p>
<p><img src="./pictures/mark1.png" class="img-fluid"></p>
<p>On peut déja à partir de la definir le titre, l’auteur et le format de sortie. Toutes ces informations pourront être modifié par la suite dans le code. Cela nous genère un fichier .Rmd. C’est ce fichier qui va contenir tout le code.</p>
</section>
<section id="generer-la-sortie" class="level3">
<h3 class="anchored" data-anchor-id="generer-la-sortie">Generer la sortie</h3>
<p>Pour generer le document de sortie, il suffit de cliquer sur “Knit”.</p>
<p><img src="./pictures/mark2.png" class="img-fluid"></p>
<p>Il va ensuite generer le document au format choisi. Il doit apparaitre dans la fenêtre “Viewer”. Vous pouvez aussi choisir dans le menu deroulant, le format de sorti voulu et le fichier de sorti</p>
<p>La sortie en PDF peut necesitter d’installer TinyTeX (tinytex::install_tinytex()).</p>
</section>
<section id="organisation" class="level3">
<h3 class="anchored" data-anchor-id="organisation">Organisation</h3>
<section id="len-tête" class="level4">
<h4 class="anchored" data-anchor-id="len-tête">L’en tête</h4>
<p>L’en-tête est contenu entre deux séries de pointillés. Par défaut, il contient deux types d’éléments : le titre du document, et son format de sortie.</p>
<p><img src="./pictures/mark3.png" class="img-fluid"></p>
<p>L’en tête peut contenir plusieurs autres informations:</p>
<ul>
<li><p>title</p></li>
<li><p>date</p></li>
<li><p>output: pdf_document / html_document</p></li>
<li><p>author</p></li>
</ul>
<p>Il est suivi par le set up. Ilpermet de régler les options par défaut de tous les chunks. Par exemple, on va pouvoir indiquer que l’on ne veut pas faire les messages et les warnings qui pourraient être générés lors de l’exécution des chunck. Au lieu de le faire pour tous les chunks, on peut le faire une seule fois ici.</p>
<p><img src="./pictures/mark4.png" class="img-fluid"></p>
</section>
<section id="les-chunks" class="level4">
<h4 class="anchored" data-anchor-id="les-chunks">Les chunks</h4>
<p>Le code d’un fichier Markdown s’organise autour des chunks. Le chunk est la partie du fichier markdown ou le code s’execute.</p>
<p>Il est de la forme suivante :</p>
<p><img src="./pictures/mark5.png" class="img-fluid"></p>
<p>On peut generer un chunk de plusieurs façon:</p>
<ul>
<li><p>en l’ecrivant avec le clavier (si vous avez du temps à perdre)</p></li>
<li><p>Ctrl + Alt + I</p></li>
</ul>
</section>
<section id="executer-les-chunks" class="level4">
<h4 class="anchored" data-anchor-id="executer-les-chunks">Executer les chunks</h4>
<p>Les chunks peuvent être executer sans faire de rendu automatique. Il suffit de cliquer sur la flèche verte à la fin du chunk. On peut aussi decider de faire tourner tous les chunks jusqu’à celui la en cliquant sur le bouton à coté.</p>
<p><img src="./pictures/mark9.png" class="img-fluid"></p>
</section>
<section id="parametres-du-chunk" class="level4">
<h4 class="anchored" data-anchor-id="parametres-du-chunk">Parametres du chunk</h4>
<p>Un chunk peut être executé de différente manière en fonction des paramètres à mettre entre {}.</p>
<ul>
<li><strong>un nom</strong>: pour suivre les erreurs lors de la compilation, on peut mettre un nom différent à chaque chunk. Ce nom doit être sans espace et sans majuscule.</li>
</ul>
<p><img src="./pictures/mark6.png" class="img-fluid"></p>
<ul>
<li><p><strong>echo=FALSE</strong>: cache le chunk mais il tournera et affichera la sortie</p></li>
<li><p><strong>results=‘hide’</strong>: ne montre pas les sorties du chunk</p></li>
<li><p><strong>message=FALSE</strong>: ne montre pas les <strong>messages</strong> de sortie</p></li>
<li><p><strong>include = FALSE/TRUE</strong>: cache le chunk et la sortie, mais il tournera</p></li>
<li><p><strong>warning=FALSE</strong>: ne montre pas les messages de <strong>warning</strong></p></li>
<li><p><strong>fig.show=‘hide’</strong>: ne montre pas les figures. On peut selectionner aussi “first”, “last”, “none” (qui ne les genère pas du tout contrairement à “hide” qui les génère mais ne les montre pas)</p></li>
<li><p><strong>eval = FALSE</strong> montre le chunk mais l’ignore</p></li>
<li><p><strong>fig.width =</strong> et <strong>fig.height==</strong>: pour modifier la taille des figures</p></li>
</ul>
<p><img src="./pictures/mark7.png" class="img-fluid"></p>
</section>
<section id="le-texte" class="level4">
<h4 class="anchored" data-anchor-id="le-texte">Le texte</h4>
<p>Il est possible de générer du text entre les chunk pour donner des explications. Le texte peut être mise en forme:</p>
<ul>
<li><p>Titre niveau 1: #</p></li>
<li><p>Titre niveau 2: ##</p></li>
<li><p>Titre niveau 3: ###</p></li>
<li><p>Mettre une puce: * ou +</p></li>
<li><p>texte en <em>italique</em>: entre * *</p></li>
<li><p>texte en <strong>gras</strong>: entre ** **</p></li>
<li><p>hyperlien: il suffit de placer l’adresse entre &lt; &gt;</p></li>
</ul>
</section>
<section id="insérer-une-image" class="level4">
<h4 class="anchored" data-anchor-id="insérer-une-image">Insérer une image</h4>
<p><img src="./pictures/mark8.png" class="img-fluid"></p>
</section>
<section id="render-dynamique-en-html" class="level4">
<h4 class="anchored" data-anchor-id="render-dynamique-en-html">Render dynamique en HTML</h4>
<section id="les-onglets-en-html" class="level5">
<h5 class="anchored" data-anchor-id="les-onglets-en-html">Les onglets en html</h5>
<p>Pour les sorties HTML, on peut organiser les sections en “onglets”. Il suffit d’ajouter .tabset dans les accolades { } qui sont ouvertes juste après le titre de la section.</p>
<p><img src="./pictures/mark10.png" class="img-fluid"></p>
</section>
<section id="les-tableaux-dynamiques" class="level5">
<h5 class="anchored" data-anchor-id="les-tableaux-dynamiques">Les tableaux dynamiques</h5>
<p>Dans un rapport HTML, vous pouvez imprimer des tableaux de données de telle sorte que le contenu soit dynamique, avec des filtres et des barres de défilement. Il existe plusieurs “packages” qui offrent cette possibilité.</p>
<p>Pour ce faire, avec le “package” DT, tel qu’il est utilisé dans ce manuel, vous pouvez insérer un morceau de code comme celui-ci :</p>
<p><img src="./pictures/mark11.png" class="img-fluid"></p>
</section>
<section id="ggplotly" class="level5">
<h5 class="anchored" data-anchor-id="ggplotly">ggplotly()</h5>
<p>La fonction ggplotly() du package plotly permet de facilement rendre un ggplot() interactif. Il suffit de sauvegarder votre ggplot() et de le passer à la fonction ggplotly().</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>plot_store <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">color =</span> Species)) </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>plot_store <span class="sc">%&gt;%</span> plotly<span class="sc">::</span><span class="fu">ggplotly</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-0f395c2da473a9abee9b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-0f395c2da473a9abee9b">{"x":{"data":[{"x":[5.0999999999999996,4.9000000000000004,4.7000000000000002,4.5999999999999996,5,5.4000000000000004,4.5999999999999996,5,4.4000000000000004,4.9000000000000004,5.4000000000000004,4.7999999999999998,4.7999999999999998,4.2999999999999998,5.7999999999999998,5.7000000000000002,5.4000000000000004,5.0999999999999996,5.7000000000000002,5.0999999999999996,5.4000000000000004,5.0999999999999996,4.5999999999999996,5.0999999999999996,4.7999999999999998,5,5,5.2000000000000002,5.2000000000000002,4.7000000000000002,4.7999999999999998,5.4000000000000004,5.2000000000000002,5.5,4.9000000000000004,5,5.5,4.9000000000000004,4.4000000000000004,5.0999999999999996,5,4.5,4.4000000000000004,5,5.0999999999999996,4.7999999999999998,5.0999999999999996,4.5999999999999996,5.2999999999999998,5],"y":[3.5,3,3.2000000000000002,3.1000000000000001,3.6000000000000001,3.8999999999999999,3.3999999999999999,3.3999999999999999,2.8999999999999999,3.1000000000000001,3.7000000000000002,3.3999999999999999,3,3,4,4.4000000000000004,3.8999999999999999,3.5,3.7999999999999998,3.7999999999999998,3.3999999999999999,3.7000000000000002,3.6000000000000001,3.2999999999999998,3.3999999999999999,3,3.3999999999999999,3.5,3.3999999999999999,3.2000000000000002,3.1000000000000001,3.3999999999999999,4.0999999999999996,4.2000000000000002,3.1000000000000001,3.2000000000000002,3.5,3.6000000000000001,3,3.3999999999999999,3.5,2.2999999999999998,3.2000000000000002,3.5,3.7999999999999998,3,3.7999999999999998,3.2000000000000002,3.7000000000000002,3.2999999999999998],"text":["Sepal.Length: 5.1<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 4.7<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.6<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.9<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 4.4<br />Sepal.Width: 2.9<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.7<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 4.3<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.8<br />Sepal.Width: 4.0<br />Species: setosa","Sepal.Length: 5.7<br />Sepal.Width: 4.4<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.9<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 5.7<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.7<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.6<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.3<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.2<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 5.2<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 4.7<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.4<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.2<br />Sepal.Width: 4.1<br />Species: setosa","Sepal.Length: 5.5<br />Sepal.Width: 4.2<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.1<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 5.5<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 4.9<br />Sepal.Width: 3.6<br />Species: setosa","Sepal.Length: 4.4<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.4<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 4.5<br />Sepal.Width: 2.3<br />Species: setosa","Sepal.Length: 4.4<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.5<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 4.8<br />Sepal.Width: 3.0<br />Species: setosa","Sepal.Length: 5.1<br />Sepal.Width: 3.8<br />Species: setosa","Sepal.Length: 4.6<br />Sepal.Width: 3.2<br />Species: setosa","Sepal.Length: 5.3<br />Sepal.Width: 3.7<br />Species: setosa","Sepal.Length: 5.0<br />Sepal.Width: 3.3<br />Species: setosa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"setosa","legendgroup":"setosa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[7,6.4000000000000004,6.9000000000000004,5.5,6.5,5.7000000000000002,6.2999999999999998,4.9000000000000004,6.5999999999999996,5.2000000000000002,5,5.9000000000000004,6,6.0999999999999996,5.5999999999999996,6.7000000000000002,5.5999999999999996,5.7999999999999998,6.2000000000000002,5.5999999999999996,5.9000000000000004,6.0999999999999996,6.2999999999999998,6.0999999999999996,6.4000000000000004,6.5999999999999996,6.7999999999999998,6.7000000000000002,6,5.7000000000000002,5.5,5.5,5.7999999999999998,6,5.4000000000000004,6,6.7000000000000002,6.2999999999999998,5.5999999999999996,5.5,5.5,6.0999999999999996,5.7999999999999998,5,5.5999999999999996,5.7000000000000002,5.7000000000000002,6.2000000000000002,5.0999999999999996,5.7000000000000002],"y":[3.2000000000000002,3.2000000000000002,3.1000000000000001,2.2999999999999998,2.7999999999999998,2.7999999999999998,3.2999999999999998,2.3999999999999999,2.8999999999999999,2.7000000000000002,2,3,2.2000000000000002,2.8999999999999999,2.8999999999999999,3.1000000000000001,3,2.7000000000000002,2.2000000000000002,2.5,3.2000000000000002,2.7999999999999998,2.5,2.7999999999999998,2.8999999999999999,3,2.7999999999999998,3,2.8999999999999999,2.6000000000000001,2.3999999999999999,2.3999999999999999,2.7000000000000002,2.7000000000000002,3,3.3999999999999999,3.1000000000000001,2.2999999999999998,3,2.5,2.6000000000000001,3,2.6000000000000001,2.2999999999999998,2.7000000000000002,3,2.8999999999999999,2.8999999999999999,2.5,2.7999999999999998],"text":["Sepal.Length: 7.0<br />Sepal.Width: 3.2<br />Species: versicolor","Sepal.Length: 6.4<br />Sepal.Width: 3.2<br />Species: versicolor","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.3<br />Species: versicolor","Sepal.Length: 6.5<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.3<br />Sepal.Width: 3.3<br />Species: versicolor","Sepal.Length: 4.9<br />Sepal.Width: 2.4<br />Species: versicolor","Sepal.Length: 6.6<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.2<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 5.0<br />Sepal.Width: 2.0<br />Species: versicolor","Sepal.Length: 5.9<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 2.2<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 6.2<br />Sepal.Width: 2.2<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 5.9<br />Sepal.Width: 3.2<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.3<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.4<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 6.6<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.8<br />Sepal.Width: 2.8<br />Species: versicolor","Sepal.Length: 6.7<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.6<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.4<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.4<br />Species: versicolor","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 5.4<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 6.0<br />Sepal.Width: 3.4<br />Species: versicolor","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: versicolor","Sepal.Length: 6.3<br />Sepal.Width: 2.3<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 5.5<br />Sepal.Width: 2.6<br />Species: versicolor","Sepal.Length: 6.1<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.8<br />Sepal.Width: 2.6<br />Species: versicolor","Sepal.Length: 5.0<br />Sepal.Width: 2.3<br />Species: versicolor","Sepal.Length: 5.6<br />Sepal.Width: 2.7<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 3.0<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 6.2<br />Sepal.Width: 2.9<br />Species: versicolor","Sepal.Length: 5.1<br />Sepal.Width: 2.5<br />Species: versicolor","Sepal.Length: 5.7<br />Sepal.Width: 2.8<br />Species: versicolor"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"versicolor","legendgroup":"versicolor","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6.2999999999999998,5.7999999999999998,7.0999999999999996,6.2999999999999998,6.5,7.5999999999999996,4.9000000000000004,7.2999999999999998,6.7000000000000002,7.2000000000000002,6.5,6.4000000000000004,6.7999999999999998,5.7000000000000002,5.7999999999999998,6.4000000000000004,6.5,7.7000000000000002,7.7000000000000002,6,6.9000000000000004,5.5999999999999996,7.7000000000000002,6.2999999999999998,6.7000000000000002,7.2000000000000002,6.2000000000000002,6.0999999999999996,6.4000000000000004,7.2000000000000002,7.4000000000000004,7.9000000000000004,6.4000000000000004,6.2999999999999998,6.0999999999999996,7.7000000000000002,6.2999999999999998,6.4000000000000004,6,6.9000000000000004,6.7000000000000002,6.9000000000000004,5.7999999999999998,6.7999999999999998,6.7000000000000002,6.7000000000000002,6.2999999999999998,6.5,6.2000000000000002,5.9000000000000004],"y":[3.2999999999999998,2.7000000000000002,3,2.8999999999999999,3,3,2.5,2.8999999999999999,2.5,3.6000000000000001,3.2000000000000002,2.7000000000000002,3,2.5,2.7999999999999998,3.2000000000000002,3,3.7999999999999998,2.6000000000000001,2.2000000000000002,3.2000000000000002,2.7999999999999998,2.7999999999999998,2.7000000000000002,3.2999999999999998,3.2000000000000002,2.7999999999999998,3,2.7999999999999998,3,2.7999999999999998,3.7999999999999998,2.7999999999999998,2.7999999999999998,2.6000000000000001,3,3.3999999999999999,3.1000000000000001,3,3.1000000000000001,3.1000000000000001,3.1000000000000001,2.7000000000000002,3.2000000000000002,3.2999999999999998,3,2.5,3,3.3999999999999999,3],"text":["Sepal.Length: 6.3<br />Sepal.Width: 3.3<br />Species: virginica","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 7.1<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.9<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 7.6<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 4.9<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 7.3<br />Sepal.Width: 2.9<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 7.2<br />Sepal.Width: 3.6<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 6.8<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 5.7<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 5.8<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 3.8<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 2.6<br />Species: virginica","Sepal.Length: 6.0<br />Sepal.Width: 2.2<br />Species: virginica","Sepal.Length: 6.9<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 5.6<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.3<br />Species: virginica","Sepal.Length: 7.2<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.2<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.1<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 7.2<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 7.4<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 7.9<br />Sepal.Width: 3.8<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.8<br />Species: virginica","Sepal.Length: 6.1<br />Sepal.Width: 2.6<br />Species: virginica","Sepal.Length: 7.7<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 3.4<br />Species: virginica","Sepal.Length: 6.4<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 6.0<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 6.9<br />Sepal.Width: 3.1<br />Species: virginica","Sepal.Length: 5.8<br />Sepal.Width: 2.7<br />Species: virginica","Sepal.Length: 6.8<br />Sepal.Width: 3.2<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.3<br />Species: virginica","Sepal.Length: 6.7<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.3<br />Sepal.Width: 2.5<br />Species: virginica","Sepal.Length: 6.5<br />Sepal.Width: 3.0<br />Species: virginica","Sepal.Length: 6.2<br />Sepal.Width: 3.4<br />Species: virginica","Sepal.Length: 5.9<br />Sepal.Width: 3.0<br />Species: virginica"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"virginica","legendgroup":"virginica","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":23.305936073059364,"r":7.3059360730593621,"b":37.260273972602747,"l":43.105022831050235},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[4.1200000000000001,8.0800000000000001],"tickmode":"array","ticktext":["5","6","7","8"],"tickvals":[5,6,7,8],"categoryorder":"array","categoryarray":["5","6","7","8"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Sepal.Length","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1.8799999999999999,4.5200000000000005],"tickmode":"array","ticktext":["2.0","2.5","3.0","3.5","4.0","4.5"],"tickvals":[2,2.5,3,3.5,4,4.5],"categoryorder":"array","categoryarray":["2.0","2.5","3.0","3.5","4.0","4.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Sepal.Width","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Species","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"d80160accb":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"d80160accb","visdat":{"d80160accb":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="quarto" class="level2">
<h2 class="anchored" data-anchor-id="quarto">Quarto</h2>
<p>Quarto fonctionne un peu de la même façon que Markdown mais permet d’autres possibilité. Quarto, c’est la nouvelle génération de R markdown. Elle est présentée comme avancée et enrichie.</p>
<section id="les-différences-de-syntaxe" class="level3">
<h3 class="anchored" data-anchor-id="les-différences-de-syntaxe">Les différences de syntaxe</h3>
<ul>
<li><p>les paramètres de chunk ne sont pas entre crochet mais en dehors et précédées de #|</p></li>
<li><p>les paramètres sont suivis de : et non =</p></li>
</ul>
<p><img src="./pictures/quarto1.png" class="img-fluid"></p>
<ul>
<li>On ne parle plus de “knits” mais de “Render”</li>
</ul>
</section>
<section id="les-nouveautés" class="level3">
<h3 class="anchored" data-anchor-id="les-nouveautés">Les nouveautés</h3>
<section id="les-equations" class="level4">
<h4 class="anchored" data-anchor-id="les-equations">Les equations</h4>
<p>Les formules peuvent être écrites entre “$”.</p>
<p><img src="./pictures/quarto2.png" class="img-fluid"></p>
</section>
<section id="ajouter-un-espace" class="level4">
<h4 class="anchored" data-anchor-id="ajouter-un-espace">Ajouter un espace</h4>
<p>En utilisant “:::” entre deux chunks.</p>
</section>
<section id="utilisation-de-python-en-natif-ou-java" class="level4">
<h4 class="anchored" data-anchor-id="utilisation-de-python-en-natif-ou-java">Utilisation de python en natif (ou Java)</h4>
<p>Il suffit de le specifier dans le chunk. Cela fonctionne même <strong>dans RSutdio</strong>.</p>
<p><img src="./pictures/quarto3.png" class="img-fluid"></p>
</section>
<section id="integrer-de-linteractivité" class="level4">
<h4 class="anchored" data-anchor-id="integrer-de-linteractivité">Integrer de l’interactivité</h4>
<p>Il est possible d’utiliser des fonctionalités de shiny et de Java pour rendre le documents interactif (plus que markdown).</p>
<p>Shiny necessite de mettre le fichier html sur un serveur pour le rendre interactifs.</p>
<p>Et en Java je suis en train de creuser la question.</p>
</section>
</section>
</section>
<section id="quarto-presentation" class="level2">
<h2 class="anchored" data-anchor-id="quarto-presentation">Quarto presentation</h2>
<p>Quarto Offre une autre fonctionnalité, la possibilité de faire des présentation (type power point) dans R. Pour ce la on peut le lancer de deux façon:</p>
<ul>
<li>Nouveau fichier &gt; Quarto Presentation</li>
</ul>
<p><img src="./pictures/quartopre1.png" class="img-fluid"></p>
<ul>
<li>soit en modifiant le haut de page -&gt; format: revealjs</li>
</ul>
<p><img src="./pictures/quartopre2.png" class="img-fluid"></p>
</section>
<section id="presentation" class="level2">
<h2 class="anchored" data-anchor-id="presentation">Presentation</h2>
<p>Pour voir la presentation il suffit de faire un Redner comme sur un Quarto Classique.</p>
<p>Cette execution ouvre un nouvel onglet à droite “Presentation”. Il permet de lancer la presentation en cliquant sur “Present”.</p>
<p><img src="./pictures/quartopreinit.png" class="img-fluid"></p>
<p>“Print” permet de le sortir en PDF.</p>
</section>
<section id="mise-en-page" class="level2">
<h2 class="anchored" data-anchor-id="mise-en-page">Mise en page</h2>
<p>Le document quarto se presente de la même façon.</p>
<section id="haut-de-page" class="level3">
<h3 class="anchored" data-anchor-id="haut-de-page">Haut de page</h3>
<p>Le haut de page doit contenir les informations classiques:</p>
<ul>
<li><p>title</p></li>
<li><p>author</p></li>
<li><p>date</p></li>
</ul>
<p>Le paramètre format ‘revealjs’ permet aussi des paramètres:</p>
<ul>
<li><p>footer: “Example of footer”</p></li>
<li><p>theme: dark (beige / blood / dark / default / dracula / league / moon / night / serif / simple / sky/ solarized)</p></li>
<li><p>transition: slide / fade</p></li>
</ul>
<p><img src="./pictures/quartopre3.png" class="img-fluid"></p>
<p>Ce qui donne ça:</p>
<p><img src="./pictures/quartopre4.png" class="img-fluid"></p>
</section>
<section id="slide" class="level3">
<h3 class="anchored" data-anchor-id="slide">Slide</h3>
<p>La suite du quarto s’organise de la même façon.</p>
<section id="commencer-une-slide" class="level4">
<h4 class="anchored" data-anchor-id="commencer-une-slide">Commencer une slide</h4>
<p>Un slide se commence avec <strong>##</strong>. On peut mettre un titre à la suite (## Titre) ou non (##).</p>
<p><img src="./pictures/quartopre5.png" class="img-fluid"> Qui donne :</p>
<p><img src="./pictures/quartopre6.png" class="img-fluid"></p>
</section>
<section id="ajouter-un-background" class="level4">
<h4 class="anchored" data-anchor-id="ajouter-un-background">Ajouter un background</h4>
<p>On peut lui ajouter un fond. Il suffit de fournir une image (background.jpg).</p>
<p><img src="./pictures/quartopre7.png" class="img-fluid"></p>
<p><img src="./pictures/quartopre8.png" class="img-fluid"></p>
<p>Si il y a un titre à la slide, le paramètre doit être collé au titre :</p>
<ul>
<li>Titre{background-image=background.jpg}</li>
</ul>
<p>L’ajout du background se fait slide après slide.</p>
<p>Pour ajouter un background à la slide de titre, il faut le definir dans l’en tête de cette manière.</p>
<p><img src="./pictures/quartopre9.png" class="img-fluid"></p>
</section>
<section id="les-colonnes" class="level4">
<h4 class="anchored" data-anchor-id="les-colonnes">Les colonnes</h4>
<p>On peut vouloir afficher cote à cote des sorties dans la même slide, comme un tableau et un graphique. Pour cela, on utilise des colonnes.</p>
<ul>
<li><p>on initialise les colonnes avec une <em>fence</em> -&gt; :::: {.columns}</p></li>
<li><p>on créé une première colonne -&gt; ::: {.column}</p>
<ul>
<li>la colonne peut être parametré en largeur en utilisant “width”</li>
</ul></li>
<li><p>on ferme la colonne -&gt; :::</p></li>
<li><p>on ferme la <em>fence</em> -&gt; ::::</p></li>
</ul>
<p><img src="./pictures/quartopre10.png" class="img-fluid"></p>
<p>La fonction “gt()” du pcakge {gt} permet de rendre un tableau dynamique.</p>
<p><img src="./pictures/quartopre11.png" class="img-fluid"></p>
</section>
<section id="un-callout" class="level4">
<h4 class="anchored" data-anchor-id="un-callout">Un callout</h4>
<p>On peut ajouter ce qu’on appelle un <strong>callout</strong>.</p>
<p>Il existe plusieurs forme de callout:</p>
<ul>
<li><p>tip</p></li>
<li><p>warning</p></li>
</ul>
<p>Et on peut lui ajouter un titre et du texte.</p>
<p><img src="./pictures/quartopre12.png" class="img-fluid"></p>
<p><img src="./pictures/quartopre13.png" class="img-fluid"></p>
</section>
<section id="animer-une-slide" class="level4">
<h4 class="anchored" data-anchor-id="animer-une-slide">Animer une slide</h4>
<p>On peut animer une slide, en disant à quarto de faire une pause. Pour cela il suffit d’utilsier 3 points avec une espace entre chaque à l’endroit de la pause:</p>
<ul>
<li>. . .</li>
</ul>
<p><img src="./pictures/quartopre14.png" class="img-fluid"></p>
<p>Cette pause va d’abord afficher le callout puis la table iris.</p>
<p><img src="./pictures/quartopre15.png" class="img-fluid"></p>
</section>
<section id="afficher-le-code" class="level4">
<h4 class="anchored" data-anchor-id="afficher-le-code">Afficher le code</h4>
<p>Par default, dans une presentation, quarto presente seulement les sortie de code et pas le code lui même. On peut le forcer en ajoutant les paramètres suivant dans le chunk:</p>
<ul>
<li>echo: true</li>
</ul>
<p><img src="./pictures/quartopre16.png" class="img-fluid"></p>
<p><img src="./pictures/quartopre17.png" class="img-fluid"></p>
<p>L’affichage du code dans Quarto peut être parametré:</p>
<ul>
<li><p>#| fig-align: center -&gt; pour la position des figures</p></li>
<li><p>#| output-location: column -&gt; la position du code par rapport au plot</p>
<ul>
<li><p>column : donne en deux colonne</p></li>
<li><p>fragment : instaure une pause dans l’animation</p></li>
<li><p>slide : deplace la figure sur une deuxième slide</p></li>
</ul></li>
</ul>
</section>
<section id="highlight-code" class="level4">
<h4 class="anchored" data-anchor-id="highlight-code">Highlight code</h4>
<p>On peut mettre en avant des lignes de codes specifiques, très pratique pour expliquer un code en particulier. Pour cela on peut utiliser:</p>
<ul>
<li>#| code-line-numbers:</li>
</ul>
<p>On lui donne les numéros de ligne (basé sur la slide) que l’on souhaite mettre en avant:</p>
<ul>
<li>#| code-line-numbers: “3-5” -&gt; va montrer les lignes 3 à 5</li>
</ul>
<p><img src="./pictures/quartopre18.png" class="img-fluid"></p>
<p><img src="./pictures/quartopre19.png" class="img-fluid"></p>
<p>On peut aussi mettre en avant plusieurs lignes de code à la suite, dans différente slide :</p>
<ul>
<li><p>#| code-line-numbers: “3-5|6*7” -&gt; va montrer les lignes 3 à 5 puis 6 et 7</p></li>
<li><p>#| code-line-numbers: “|3-5|6*7” -&gt; va montrer tout le code, puis les lignes 3 à 5 puis les lignes 6 et 7</p></li>
</ul>
<p><img src="./pictures/quartopre20.png" class="img-fluid"></p>
<p><img src="./pictures/gif_quarto.gif" class="img-fluid"></p>
</section>
</section>
<section id="option-tableau-et-ecrir-sur-diapo" class="level3">
<h3 class="anchored" data-anchor-id="option-tableau-et-ecrir-sur-diapo">Option tableau et ecrir sur diapo</h3>
<p>Il est possible d’écrire sur les slide en ajoutant une option au format dans l’en tête:</p>
<ul>
<li>chalkboard: true</li>
</ul>
<p><img src="./pictures/quartopre21.png" class="img-fluid"></p>
</section>
<section id="confetti" class="level3">
<h3 class="anchored" data-anchor-id="confetti">Confetti</h3>
<p>Et le clou du spectacle, la fraise au sommet de la montagne de chantilly: on peut faire apapraitre des confetti !!! Le package est disponible sur github <a href="https://github.com/ArthurData/quarto-confetti" class="uri">https://github.com/ArthurData/quarto-confetti</a>.</p>
<section id="installation-1" class="level4">
<h4 class="anchored" data-anchor-id="installation-1">Installation</h4>
<p>Il faut installer le package dans le projet de la presentation. L’extention JavaScript doit être installé en copiant dans le terminal :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>quarto add ArthurData<span class="sc">/</span>quarto<span class="sc">-</span>confetti</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="usage" class="level4">
<h4 class="anchored" data-anchor-id="usage">Usage</h4>
<p>Il faut juste modifier l’en-tête de la présentation en ajoutant:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"My presentation"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>format<span class="sc">:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  revealjs<span class="sc">:</span> default</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>revealjs<span class="sc">-</span>plugins<span class="sc">:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span> confetti</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On peut aussi ajouter des paramètres pour personnaliser les confettis:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"My presentation"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>format<span class="sc">:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  revealjs<span class="sc">:</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    confetti<span class="sc">:</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>      particleCount<span class="sc">:</span> <span class="dv">150</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>      angle<span class="sc">:</span> <span class="dv">90</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>      spread<span class="sc">:</span> <span class="dv">360</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>      startVelocity<span class="sc">:</span> <span class="dv">25</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>      gravity<span class="sc">:</span> <span class="fl">0.65</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>      drift<span class="sc">:</span> <span class="dv">0</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>      ticks<span class="sc">:</span> <span class="dv">400</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>      colors<span class="sc">:</span> [<span class="st">"#0366fc"</span>, <span class="st">"#f54281"</span>, <span class="st">"#1fd14f"</span>]</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>      scalar<span class="sc">:</span> <span class="fl">0.7</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>revealjs<span class="sc">-</span>plugins<span class="sc">:</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span> confetti</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Il suffit de cliquer sur <code>c</code> pour lancer les confettis et de placer sa souris à l’endroit voulu !!</p>
<p><img src="./pictures/confetti.gif" class="img-fluid"></p>
<p>Merci <a href="https://github.com/ArthurData/quarto-confetti/tree/main">ArthurData</a> !</p>
</section>
</section>
</section>
</section>
<section id="tips" class="level1">
<h1>Tips</h1>
<section id="rdata-et-.rds" class="level2">
<h2 class="anchored" data-anchor-id="rdata-et-.rds">.Rdata et .rds</h2>
<p>Les fichiers R peuvent être sauvegardé et réutilisé sans passé par des .csv, .gpkg ou autre. Ce type de fichier permets de sauvegarder tout objet R:</p>
<ul>
<li><p>data</p></li>
<li><p>model</p></li>
<li><p>figure</p></li>
<li><p>etc.</p></li>
</ul>
<p>On peut utiliser .Rdata pour sauver un ou plusieurs objet R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># un objet</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(data, <span class="at">file =</span> <span class="st">"./EXPORT/data.RData"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"./EXPORT/data.RData"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># plusieurs</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(data1, data2, <span class="at">file =</span> <span class="st">"./EXPORT/data.RData"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"./EXPORT/data.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="browser" class="level2">
<h2 class="anchored" data-anchor-id="browser">{browser}</h2>
<p>Quand vous travaillez sur une fonction, dans un map ou un lapply, la fonction browser(), permet de rentrer en mode ‘debbug’. Cela permet d’être dans la fonction quand elle tourne (dans son environment) et de travailler dessus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exemple dans une fonction</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>function_test <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">browser</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  division <span class="ot">=</span> x<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(division)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">function_test</span>(<span class="at">x=</span><span class="dv">2</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># exemple dans une fonction map {purrr}</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span> <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f =</span> <span class="cf">function</span>(x){</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">browser</span>()</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    division <span class="ot">=</span> x<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(division)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Q + Enter to exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="raccourci-clavier" class="level2">
<h2 class="anchored" data-anchor-id="raccourci-clavier">Raccourci clavier</h2>
<ul>
<li><p>Ctrl + Enter : exécuter les lignes sélectionnée</p></li>
<li><p>Tab : autocomplétion</p></li>
<li><p>Ctrl + A : selectionner tout le code</p></li>
<li><p>Ctrl + I : réindenter code</p></li>
<li><p>Ctrl + Shift + A : reformater code</p></li>
<li><p>Alt + Up/Down : déplacer une ligne sans faire copier-coller</p></li>
<li><p>Ctrl + Shift + M : insérer pipe %&gt;%</p></li>
<li><p>Alt+ 6 (Windows) : insérer opérateur assignation &lt;-</p></li>
<li><p>Ctrl + Shift + flèche : selectionner</p></li>
<li><p>Ctrl + Shift + C : mettre un # devant les lignes</p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>